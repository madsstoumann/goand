<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <title>GoAnd</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link href="spinner.css" rel="stylesheet">
</head>
<body>

<script type="module">

  /* Custom error */
  function myError(error) {
    console.log(`%c ${error.name} %c ${error.message} %c ${error.status} `, "background:#333333 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff", "background:#e60032 ; padding: 1px; color: #fff", "background:#ccc ; padding: 1px; border-radius: 0 3px 3px 0;  color: #222");
  }

  /* Custom parser */
  function myParser(response) {
    const parser = new DOMParser();
    console.log(`%c Custom %c Parser: `, "background:#333333 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff", "background:orange; padding: 1px; color: #222");
    return parser.parseFromString(response, "text/html");
  }

  /* Examples */
  import goand from './goand.mjs';
  import Spinner from './spinner.mjs';

  (async () => {
    const spinner = new Spinner({ class: 'c-spinner__circle', console: true });
    const data = await goand('https://jsonplaceholder.typicode.com/albums/?_limit=10&q=lorem', {
      error: myError,
      mode: 'cors',
      spinner: spinner.show
    });
    console.log(data);
  })();

  goand('//dawa.aws.dk/adresser/autocomplete?side=1&per_side=10&q=marievej', {
    error: myError,
    mode: 'cors',
    timeout: 3000
  }).then(data => {
    console.log(data);
  });

  goand('//httpstat.us/500', {
    error: myError,
    mode: 'cors'
  }).then(data => {
    console.log(data);
  });
 
  goand('logifront.svg', {
    parser: myParser
  }).then(data => {
    console.log(data);
  });

</script>
</body>
</html>